{"version":3,"sources":["../../../../../masseurmatch-nextjs/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../../masseurmatch-nextjs/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../../masseurmatch-nextjs/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../../masseurmatch-nextjs/components/CityLandingPage.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { CityInfo } from '@/data/cityMap';\r\nimport { SegmentConfig } from '@/data/segmentConfig';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\ntype Therapist = {\r\n  user_id: string;\r\n  slug: string;\r\n  display_name: string;\r\n  headline: string;\r\n  city: string;\r\n  state: string;\r\n  rating: number;\r\n  profile_photo?: string;\r\n  services?: string[];\r\n};\r\n\r\ntype Props = {\r\n  city: CityInfo;\r\n  segment: SegmentConfig | null;\r\n};\r\n\r\nexport default function CityLandingPage({ city, segment }: Props) {\r\n  const [therapists, setTherapists] = useState<Therapist[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function fetchTherapists() {\r\n      setLoading(true);\r\n\r\n      // Base query: get therapists in this city\r\n      let query = supabase\r\n        .from('therapists')\r\n        .select('user_id, slug, display_name, headline, city, state, rating, profile_photo, services')\r\n        .ilike('city', city.name) // Case-insensitive match\r\n        .eq('status', 'active')\r\n        .order('rating', { ascending: false })\r\n        .limit(50);\r\n\r\n      // If segment filter is provided, filter by service\r\n      if (segment) {\r\n        // This assumes your services column contains the segment name\r\n        // Adjust based on your actual database structure\r\n        const serviceKeyword = segment.slug.replace(/-/g, ' ');\r\n        query = query.contains('services', [serviceKeyword]);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n\r\n      if (!error && data) {\r\n        setTherapists(data);\r\n      }\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    fetchTherapists();\r\n  }, [city, segment]);\r\n\r\n  return (\r\n    <div className=\"city-landing-page\">\r\n      {/* Header */}\r\n      <header className=\"header\">\r\n        <h1>\r\n          {segment\r\n            ? `${segment.slug.replace(/-/g, ' ')} in ${city.name}${city.state ? `, ${city.state}` : ''}`\r\n            : `Massage Therapists in ${city.name}${city.state ? `, ${city.state}` : ''}`}\r\n        </h1>\r\n        {segment && (\r\n          <p className=\"narrative\">{segment.narrative(city.name)}</p>\r\n        )}\r\n      </header>\r\n\r\n      {/* Stats */}\r\n      <div className=\"stats\">\r\n        <p>\r\n          {loading\r\n            ? 'Loading...'\r\n            : `Found ${therapists.length} therapist${therapists.length !== 1 ? 's' : ''}`}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Therapist Grid */}\r\n      {loading ? (\r\n        <div className=\"loading\">Loading therapists...</div>\r\n      ) : therapists.length === 0 ? (\r\n        <div className=\"no-results\">\r\n          <p>No therapists found in {city.name}{segment && ` for ${segment.slug.replace(/-/g, ' ')}`}.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"therapist-grid\">\r\n          {therapists.map((therapist) => (\r\n            <a\r\n              key={therapist.user_id}\r\n              href={`/therapist/${therapist.slug}`}\r\n              className=\"therapist-card\"\r\n            >\r\n              {therapist.profile_photo && (\r\n                <img\r\n                  src={therapist.profile_photo}\r\n                  alt={therapist.display_name}\r\n                  className=\"profile-photo\"\r\n                />\r\n              )}\r\n              <h3>{therapist.display_name}</h3>\r\n              <p className=\"headline\">{therapist.headline}</p>\r\n              <div className=\"meta\">\r\n                <span>‚≠ê {therapist.rating}</span>\r\n                <span>üìç {therapist.city}, {therapist.state}</span>\r\n              </div>\r\n              {therapist.services && therapist.services.length > 0 && (\r\n                <div className=\"services\">\r\n                  {therapist.services.slice(0, 3).map((service) => (\r\n                    <span key={service} className=\"service-badge\">\r\n                      {service}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </a>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Neighboring Cities */}\r\n      {city.neighbors && city.neighbors.length > 0 && (\r\n        <div className=\"neighbors\">\r\n          <h2>Nearby Areas</h2>\r\n          <div className=\"neighbor-links\">\r\n            {city.neighbors.map((neighborSlug) => (\r\n              <a key={neighborSlug} href={`/city/${neighborSlug}`}>\r\n                {neighborSlug.replace(/-/g, ' ')}\r\n              </a>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"yNA0BQG,GAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,0CCA9B,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,OAmBe,SAAS,EAAgB,MAAE,CAAI,SAAE,CAAO,CAAS,EAC9D,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,EAAE,EACtD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAmCvC,MAjCA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MACR,AA6BA,eA7Be,EACb,GAAW,GAGX,IAAI,EAAQ,EAAA,QAAQ,CACjB,IAAI,CAAC,cACL,MAAM,CAAC,uFACP,KAAK,CAAC,OAAQ,EAAK,IAAI,EAAE,AACzB,EAAE,CAAC,SAAU,UACb,GAFkD,EAE7C,CAAC,SAAU,CAAE,WAAW,CAAM,GACnC,KAAK,CAAC,IAGT,GAAI,EAAS,CAGX,IAAM,EAAiB,EAAQ,IAAI,CAAC,OAAO,CAAC,KAAM,KAClD,EAAQ,EAAM,QAAQ,CAAC,WAAY,CAAC,EAAe,CACrD,CAEA,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,CAE1B,EAAC,GAAS,GACZ,EAAc,CADI,EAIpB,GAAW,EACb,GAGF,EAAG,CAAC,EAAM,EAAQ,EAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,mBAChB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACE,EACG,CAAA,EAAG,EAAQ,IAAI,CAAC,OAAO,CAAC,KAAM,KAAK,IAAI,EAAE,EAAK,IAAI,CAAA,EAAG,EAAK,KAAK,CAAG,CAAC,EAAE,EAAE,EAAK,KAAK,CAAA,CAAE,CAAG,GAAA,CAAI,CAC1F,CAAC,sBAAsB,EAAE,EAAK,IAAI,CAAA,EAAG,EAAK,KAAK,CAAG,CAAC,EAAE,EAAE,EAAK,KAAK,CAAA,CAAE,CAAG,GAAA,CAAI,GAE/E,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qBAAa,EAAQ,SAAS,CAAC,EAAK,IAAI,OAKzD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UACE,EACG,aACA,CAAC,MAAM,EAAE,EAAW,MAAM,CAAC,UAAU,EAAwB,IAAtB,EAAW,MAAM,CAAS,IAAM,GAAA,CAAI,KAKlF,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAU,0BACD,IAAtB,EAAW,MAAM,CACnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,0BAAwB,EAAK,IAAI,CAAE,GAAW,CAAC,KAAK,EAAE,EAAQ,IAAI,CAAC,OAAO,CAAC,KAAM,KAAA,CAAM,CAAC,SAG7F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAEC,KAAM,CAAC,WAAW,EAAE,EAAU,IAAI,CAAA,CAAE,CACpC,UAAU,2BAET,EAAU,aAAa,EACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAU,aAAa,CAC5B,IAAK,EAAU,YAAY,CAC3B,UAAU,kBAGd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAI,EAAU,YAAY,GAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oBAAY,EAAU,QAAQ,GAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,KAAG,EAAU,MAAM,IACzB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,MAAI,EAAU,IAAI,CAAC,KAAG,EAAU,KAAK,OAE5C,EAAU,QAAQ,EAAI,EAAU,QAAQ,CAAC,MAAM,CAAG,GACjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBACZ,EAAU,QAAQ,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAmB,UAAU,yBAC3B,GADQ,QApBZ,EAAU,OAAO,KAgC7B,EAAK,SAAS,EAAI,EAAK,SAAS,CAAC,MAAM,CAAG,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,iBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,EAAK,SAAS,CAAC,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAqB,KAAM,CAAC,MAAM,EAAE,EAAA,CAAc,UAChD,EAAa,OAAO,CAAC,KAAM,MADtB,WAStB","ignoreList":[0,1,2]}