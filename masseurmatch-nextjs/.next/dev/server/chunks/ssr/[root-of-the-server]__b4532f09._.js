module.exports = [
"[project]/masseurmatch-nextjs/app/favicon.ico.mjs { IMAGE => \"[project]/masseurmatch-nextjs/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/masseurmatch-nextjs/app/favicon.ico.mjs { IMAGE => \"[project]/masseurmatch-nextjs/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript)"));
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[project]/masseurmatch-nextjs/app/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/masseurmatch-nextjs/app/layout.tsx [app-rsc] (ecmascript)"));
}),
"[project]/masseurmatch-nextjs/lib/supabase.ts [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "supabase",
    ()=>supabase,
    "supabaseAdmin",
    ()=>supabaseAdmin
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/@supabase/supabase-js/dist/index.mjs [app-rsc] (ecmascript) <locals>");
;
const supabaseUrl = ("TURBOPACK compile-time value", "https://ijsdpozjfjjufjsoexod.supabase.co");
const supabaseAnonKey = ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlqc2Rwb3pqZmpqdWZqc29leG9kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDcxNTYsImV4cCI6MjA3NzU4MzE1Nn0.S6fGMlOp8KLHwPGL9ebOQvDUqY3C79bw3SH9IOsCi2M");
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;
if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
;
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseAnonKey);
const supabaseAdmin = supabaseServiceKey ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(supabaseUrl, supabaseServiceKey, {
    auth: {
        autoRefreshToken: false,
        persistSession: false
    }
}) : null;
}),
"[project]/masseurmatch-nextjs/lib/seo.ts [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SITE_URL",
    ()=>SITE_URL,
    "absUrl",
    ()=>absUrl,
    "firstSentence",
    ()=>firstSentence,
    "formatCity",
    ()=>formatCity,
    "generateSlug",
    ()=>generateSlug,
    "stripHtml",
    ()=>stripHtml,
    "truncate",
    ()=>truncate
]);
const SITE_URL = ("TURBOPACK compile-time value", "http://localhost:3000") || 'https://www.masseurmatch.com';
function absUrl(path) {
    return `${SITE_URL}${path.startsWith('/') ? path : `/${path}`}`;
}
function stripHtml(html) {
    if (!html) return '';
    return html.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
}
function truncate(s, max = 160) {
    if (!s) return '';
    return s.length > max ? s.slice(0, max - 1).trim() + '…' : s;
}
function generateSlug(...parts) {
    return parts.filter(Boolean).join('-').toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
}
function formatCity(city, state, country) {
    let result = city;
    if (state) result += `, ${state}`;
    if (country && country !== 'US') result += `, ${country}`;
    return result;
}
function firstSentence(text) {
    if (!text) return '';
    const match = text.match(/^[^.!?]+[.!?]/);
    return match ? match[0].trim() : text.substring(0, 100) + '...';
}
}),
"[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (client reference proxy) <module evaluation>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
// This file is generated by next-core EcmascriptClientReferenceModule.
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/masseurmatch-nextjs/components/TherapistProfile.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/masseurmatch-nextjs/components/TherapistProfile.tsx <module evaluation>", "default");
}),
"[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (client reference proxy)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
// This file is generated by next-core EcmascriptClientReferenceModule.
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/masseurmatch-nextjs/components/TherapistProfile.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/masseurmatch-nextjs/components/TherapistProfile.tsx", "default");
}),
"[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$components$2f$TherapistProfile$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (client reference proxy) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$components$2f$TherapistProfile$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (client reference proxy)");
;
__turbopack_context__.n(__TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$components$2f$TherapistProfile$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__);
}),
"[project]/masseurmatch-nextjs/app/therapist/[slug]/page.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>TherapistPage,
    "generateMetadata",
    ()=>generateMetadata,
    "generateStaticParams",
    ()=>generateStaticParams,
    "revalidate",
    ()=>revalidate
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$api$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/next/dist/api/navigation.react-server.js [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/node_modules/next/dist/client/components/navigation.react-server.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$supabase$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/lib/supabase.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/lib/seo.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$components$2f$TherapistProfile$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/masseurmatch-nextjs/components/TherapistProfile.tsx [app-rsc] (ecmascript)");
;
;
;
;
;
const revalidate = 3600; // Revalidate every hour
async function getTherapistBySlug(slug) {
    // 1) Try current slug
    const { data: therapist } = await __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$supabase$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["supabaseAdmin"].from('therapists').select('*').eq('slug', slug).eq('status', 'active').maybeSingle();
    if (therapist) {
        return {
            therapist,
            canonicalSlug: therapist.slug
        };
    }
    // 2) Check slug redirects table (old slug → therapist_id)
    const { data: redirect } = await __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$supabase$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["supabaseAdmin"].from('therapist_slug_redirects').select('therapist_id, old_slug').eq('old_slug', slug).maybeSingle();
    if (!redirect?.therapist_id) {
        return {
            therapist: null,
            canonicalSlug: null
        };
    }
    // 3) Get therapist by ID from redirect
    const { data: therapist2 } = await __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$supabase$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["supabaseAdmin"].from('therapists').select('*').eq('user_id', redirect.therapist_id).eq('status', 'active').maybeSingle();
    return {
        therapist: therapist2,
        canonicalSlug: therapist2?.slug ?? null
    };
}
async function generateMetadata({ params }) {
    const { therapist, canonicalSlug } = await getTherapistBySlug(params.slug);
    if (!therapist) {
        return {
            title: 'Therapist Not Found | MasseurMatch',
            robots: {
                index: false,
                follow: true
            }
        };
    }
    const canonicalPath = `/therapist/${canonicalSlug}`;
    const url = (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["absUrl"])(canonicalPath);
    const title = `${therapist.display_name} – ${therapist.headline || 'Massage Therapist'} in ${therapist.city}${therapist.state ? `, ${therapist.state}` : ''} | MasseurMatch`;
    const description = (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["truncate"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["stripHtml"])(therapist.headline || therapist.about || `Book ${therapist.display_name} in ${therapist.city}.`), 160);
    return {
        title,
        description,
        alternates: {
            canonical: url
        },
        openGraph: {
            title,
            description,
            url,
            type: 'profile',
            images: therapist.profile_photo ? [
                therapist.profile_photo
            ] : []
        },
        twitter: {
            card: 'summary_large_image',
            title,
            description,
            images: therapist.profile_photo ? [
                therapist.profile_photo
            ] : []
        }
    };
}
async function TherapistPage({ params }) {
    const { therapist, canonicalSlug } = await getTherapistBySlug(params.slug);
    if (!therapist) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["notFound"])();
    }
    // Redirect to canonical slug if different
    if (canonicalSlug && canonicalSlug !== params.slug) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["redirect"])(`/therapist/${canonicalSlug}`);
    }
    // Generate JSON-LD structured data
    const jsonLd = {
        '@context': 'https://schema.org',
        '@type': 'LocalBusiness',
        '@id': (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["absUrl"])(`/therapist/${therapist.slug}`),
        name: therapist.display_name,
        description: (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["stripHtml"])(therapist.about || therapist.headline),
        url: (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$seo$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["absUrl"])(`/therapist/${therapist.slug}`),
        telephone: therapist.phone,
        email: therapist.email,
        image: therapist.profile_photo,
        priceRange: therapist.rate_60 || '$$',
        address: {
            '@type': 'PostalAddress',
            addressLocality: therapist.city,
            addressRegion: therapist.state,
            addressCountry: therapist.country || 'US'
        },
        geo: therapist.latitude && therapist.longitude ? {
            '@type': 'GeoCoordinates',
            latitude: parseFloat(therapist.latitude),
            longitude: parseFloat(therapist.longitude)
        } : undefined,
        areaServed: {
            '@type': 'City',
            name: therapist.city
        },
        aggregateRating: therapist.rating && therapist.override_reviews_count ? {
            '@type': 'AggregateRating',
            ratingValue: therapist.rating,
            reviewCount: therapist.override_reviews_count,
            bestRating: 5,
            worstRating: 1
        } : undefined,
        serviceType: therapist.services
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["jsxDEV"])("script", {
                type: "application/ld+json",
                dangerouslySetInnerHTML: {
                    __html: JSON.stringify(jsonLd)
                }
            }, void 0, false, {
                fileName: "[project]/masseurmatch-nextjs/app/therapist/[slug]/page.tsx",
                lineNumber: 168,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$components$2f$TherapistProfile$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["default"], {
                therapist: therapist
            }, void 0, false, {
                fileName: "[project]/masseurmatch-nextjs/app/therapist/[slug]/page.tsx",
                lineNumber: 172,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true);
}
async function generateStaticParams() {
    const { data: therapists } = await __TURBOPACK__imported__module__$5b$project$5d2f$masseurmatch$2d$nextjs$2f$lib$2f$supabase$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["supabaseAdmin"].from('therapists').select('slug').eq('status', 'active').limit(100); // Generate top 100 at build time
    return (therapists || []).map((t)=>({
            slug: t.slug
        }));
}
}),
"[project]/masseurmatch-nextjs/app/therapist/[slug]/page.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/masseurmatch-nextjs/app/therapist/[slug]/page.tsx [app-rsc] (ecmascript)"));
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__b4532f09._.js.map